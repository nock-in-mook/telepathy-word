<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ãƒ†ãƒ¬ãƒ‘ã‚·ãƒ¼ãƒ¯ãƒ¼ãƒ‰</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYmciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZTg0NTdhIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6IzliNTlkMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgPCEtLSBCYWNrZ3JvdW5kIC0tPgogIDxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iMTAwIiBmaWxsPSJ1cmwoI2JnKSIvPgogIDwhLS0gVGVsZXBhdGh5IHdhdmVzIC0tPgogIDxwYXRoIGQ9Ik0xMzUgMTQwIFExMDUgMjIwIDEzNSAzMDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwuMykiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CiAgPHBhdGggZD0iTTEwNSAxMTUgUTY1IDIyMCAxMDUgMzI1IiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsLjE4KSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KICA8cGF0aCBkPSJNMzc3IDE0MCBRNDA3IDIyMCAzNzcgMzAwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsLjMpIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgogIDxwYXRoIGQ9Ik00MDcgMTE1IFE0NDcgMjIwIDQwNyAzMjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwuMTgpIiBzdHJva2Utd2lkdGg9IjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgogIDwhLS0gU3BhcmtsZXMgLS0+CiAgPHRleHQgeD0iMTU1IiB5PSIxMzgiIGZvbnQtc2l6ZT0iMzAiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjgpIj7inKY8L3RleHQ+CiAgPHRleHQgeD0iMzM1IiB5PSIxNDgiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjYpIj7inKY8L3RleHQ+CiAgPHRleHQgeD0iMjUwIiB5PSIxMTgiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjUpIj7inKY8L3RleHQ+CiAgPCEtLSBMZXR0ZXIgYmxvY2tzIC0gYmlnZ2VyIC0tPgogIDxyZWN0IHg9IjE0OCIgeT0iMTY1IiB3aWR0aD0iNjgiIGhlaWdodD0iNjgiIHJ4PSIxNCIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwuOTUpIi8+CiAgPHRleHQgeD0iMTgyIiB5PSIyMTMiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iOTAwIiBmb250LXNpemU9IjQwIiBmaWxsPSIjZTg0NTdhIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7jg4Y8L3RleHQ+CiAgPHJlY3QgeD0iMjI2IiB5PSIxNjUiIHdpZHRoPSI2OCIgaGVpZ2h0PSI2OCIgcng9IjE0IiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LC45NSkiLz4KICA8dGV4dCB4PSIyNjAiIHk9IjIxMyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSI5MDAiIGZvbnQtc2l6ZT0iNDAiIGZpbGw9IiM5YjU5ZDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuODrDwvdGV4dD4KICA8cmVjdCB4PSIzMDQiIHk9IjE2NSIgd2lkdGg9IjY4IiBoZWlnaHQ9IjY4IiByeD0iMTQiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjk1KSIvPgogIDx0ZXh0IHg9IjMzOCIgeT0iMjEzIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjkwMCIgZm9udC1zaXplPSI0MCIgZmlsbD0iIzJlYThjNyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+44ORPC90ZXh0PgogIDwhLS0gQm90dG9tIHRleHQgLSBiaWdnZXIgLS0+CiAgPHRleHQgeD0iMjU2IiB5PSIzMjAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iOTAwIiBmb250LXNpemU9IjU2IiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBsZXR0ZXItc3BhY2luZz0iMTAiPuODr+ODvOODiTwvdGV4dD4KICA8IS0tIFN1YnRpdGxlIC0tPgogIDx0ZXh0IHg9IjI1NiIgeT0iMzcwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjcwMCIgZm9udC1zaXplPSIyMiIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwuNykiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuOBv+OCk+OBquOBruW/g+OBr+OBsuOBqOOBpDwvdGV4dD4KICA8IS0tIENvbm5lY3Rpb24gZG90cyAtLT4KICA8Y2lyY2xlIGN4PSIxOTYiIGN5PSI0MjAiIHI9IjEyIiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LC42KSIvPgogIDxjaXJjbGUgY3g9IjI1NiIgY3k9IjQyMCIgcj0iMTIiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjg1KSIvPgogIDxjaXJjbGUgY3g9IjMxNiIgY3k9IjQyMCIgcj0iMTIiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjYpIi8+CiAgPGxpbmUgeDE9IjIwOCIgeTE9IjQyMCIgeDI9IjI0NCIgeTI9IjQyMCIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LC40KSIgc3Ryb2tlLXdpZHRoPSIzIi8+CiAgPGxpbmUgeDE9IjI2OCIgeTE9IjQyMCIgeDI9IjMwNCIgeTI9IjQyMCIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LC40KSIgc3Ryb2tlLXdpZHRoPSIzIi8+Cjwvc3ZnPgo=">
<link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYmciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZTg0NTdhIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6IzliNTlkMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgPCEtLSBCYWNrZ3JvdW5kIC0tPgogIDxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iMTAwIiBmaWxsPSJ1cmwoI2JnKSIvPgogIDwhLS0gVGVsZXBhdGh5IHdhdmVzIC0tPgogIDxwYXRoIGQ9Ik0xMzUgMTQwIFExMDUgMjIwIDEzNSAzMDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwuMykiIHN0cm9rZS13aWR0aD0iNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CiAgPHBhdGggZD0iTTEwNSAxMTUgUTY1IDIyMCAxMDUgMzI1IiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsLjE4KSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KICA8cGF0aCBkPSJNMzc3IDE0MCBRNDA3IDIyMCAzNzcgMzAwIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMjU1LDI1NSwyNTUsLjMpIiBzdHJva2Utd2lkdGg9IjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgogIDxwYXRoIGQ9Ik00MDcgMTE1IFE0NDcgMjIwIDQwNyAzMjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwuMTgpIiBzdHJva2Utd2lkdGg9IjQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgogIDwhLS0gU3BhcmtsZXMgLS0+CiAgPHRleHQgeD0iMTU1IiB5PSIxMzgiIGZvbnQtc2l6ZT0iMzAiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjgpIj7inKY8L3RleHQ+CiAgPHRleHQgeD0iMzM1IiB5PSIxNDgiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjYpIj7inKY8L3RleHQ+CiAgPHRleHQgeD0iMjUwIiB5PSIxMTgiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjUpIj7inKY8L3RleHQ+CiAgPCEtLSBMZXR0ZXIgYmxvY2tzIC0gYmlnZ2VyIC0tPgogIDxyZWN0IHg9IjE0OCIgeT0iMTY1IiB3aWR0aD0iNjgiIGhlaWdodD0iNjgiIHJ4PSIxNCIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwuOTUpIi8+CiAgPHRleHQgeD0iMTgyIiB5PSIyMTMiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iOTAwIiBmb250LXNpemU9IjQwIiBmaWxsPSIjZTg0NTdhIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7jg4Y8L3RleHQ+CiAgPHJlY3QgeD0iMjI2IiB5PSIxNjUiIHdpZHRoPSI2OCIgaGVpZ2h0PSI2OCIgcng9IjE0IiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LC45NSkiLz4KICA8dGV4dCB4PSIyNjAiIHk9IjIxMyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtd2VpZ2h0PSI5MDAiIGZvbnQtc2l6ZT0iNDAiIGZpbGw9IiM5YjU5ZDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuODrDwvdGV4dD4KICA8cmVjdCB4PSIzMDQiIHk9IjE2NSIgd2lkdGg9IjY4IiBoZWlnaHQ9IjY4IiByeD0iMTQiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjk1KSIvPgogIDx0ZXh0IHg9IjMzOCIgeT0iMjEzIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjkwMCIgZm9udC1zaXplPSI0MCIgZmlsbD0iIzJlYThjNyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+44ORPC90ZXh0PgogIDwhLS0gQm90dG9tIHRleHQgLSBiaWdnZXIgLS0+CiAgPHRleHQgeD0iMjU2IiB5PSIzMjAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXdlaWdodD0iOTAwIiBmb250LXNpemU9IjU2IiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBsZXR0ZXItc3BhY2luZz0iMTAiPuODr+ODvOODiTwvdGV4dD4KICA8IS0tIFN1YnRpdGxlIC0tPgogIDx0ZXh0IHg9IjI1NiIgeT0iMzcwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9IjcwMCIgZm9udC1zaXplPSIyMiIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwuNykiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuOBv+OCk+OBquOBruW/g+OBr+OBsuOBqOOBpDwvdGV4dD4KICA8IS0tIENvbm5lY3Rpb24gZG90cyAtLT4KICA8Y2lyY2xlIGN4PSIxOTYiIGN5PSI0MjAiIHI9IjEyIiBmaWxsPSJyZ2JhKDI1NSwyNTUsMjU1LC42KSIvPgogIDxjaXJjbGUgY3g9IjI1NiIgY3k9IjQyMCIgcj0iMTIiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjg1KSIvPgogIDxjaXJjbGUgY3g9IjMxNiIgY3k9IjQyMCIgcj0iMTIiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsLjYpIi8+CiAgPGxpbmUgeDE9IjIwOCIgeTE9IjQyMCIgeDI9IjI0NCIgeTI9IjQyMCIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LC40KSIgc3Ryb2tlLXdpZHRoPSIzIi8+CiAgPGxpbmUgeDE9IjI2OCIgeTE9IjQyMCIgeDI9IjMwNCIgeTI9IjQyMCIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LC40KSIgc3Ryb2tlLXdpZHRoPSIzIi8+Cjwvc3ZnPgo=">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="ãƒ†ãƒ¬ãƒ‘ã‚·ãƒ¼ãƒ¯ãƒ¼ãƒ‰">
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&family=Dela+Gothic+One&display=swap" rel="stylesheet">
<style>
:root{--bg:#f5f0fa;--card:#fff5f7;--card2:#ede5f5;--accent:#e8457a;--accent2:#9b59d0;--accent3:#2ea8c7;--success:#16a34a;--fail:#e11d48;--text:#1a1a2e;--dim:#6b5a82;--gold:#d97706;--white:#fff}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:'Zen Maru Gothic',sans-serif;background:var(--bg);color:var(--text);min-height:100dvh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse at 20% 20%,rgba(192,132,252,.08),transparent 50%),radial-gradient(ellipse at 80% 80%,rgba(255,107,157,.05),transparent 50%);pointer-events:none}
.gear{position:fixed;top:14px;right:14px;z-index:200;width:44px;height:44px;border-radius:50%;background:rgba(0,0,0,.08);border:2px solid rgba(0,0,0,.15);color:var(--text);font-size:1.6rem;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:900;line-height:1}.gear:active{transform:scale(.9)}
.mo{display:none;position:fixed;inset:0;z-index:300;background:rgba(0,0,0,.4);backdrop-filter:blur(4px);align-items:center;justify-content:center;padding:16px}.mo.open{display:flex}
.md{background:#fff5f7;border-radius:20px;width:100%;max-width:440px;max-height:85dvh;min-height:400px;overflow-y:auto;padding:24px 20px;box-shadow:0 20px 60px rgba(0,0,0,.15);animation:fi .3s ease}
.mtabs{display:flex;gap:6px;margin-bottom:20px;flex-wrap:nowrap}
.mtab{flex:1;padding:8px 4px;border-radius:10px;border:2px solid #ddd;background:#fff;color:var(--dim);font-family:'Zen Maru Gothic',sans-serif;font-weight:700;font-size:.72rem;cursor:pointer;text-align:center;white-space:nowrap}.mtab.on{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;border-color:transparent}
.mclose{float:right;background:none;border:none;color:#999;font-size:1.5rem;cursor:pointer}
.mtitle{font-family:'Dela Gothic One',sans-serif;font-size:1.2rem;margin-bottom:16px;color:var(--accent2)}
.hi{background:var(--card2);border-radius:14px;padding:14px 16px;margin-bottom:10px;position:relative}
.hdate{font-size:.75rem;color:#999;margin-bottom:4px}.hmem{font-size:.8rem;color:var(--accent2);margin-bottom:4px}
.htopic{font-size:.85rem;color:var(--dim);margin-bottom:2px}
.hword{font-family:'Dela Gothic One',sans-serif;font-size:1.3rem}.hword.ok{color:var(--success)}.hword.ng{color:var(--fail)}
.hheart{position:absolute;top:10px;right:12px;background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--accent)}
.hempty{text-align:center;color:var(--dim);padding:32px 0}.hnote{text-align:center;color:var(--dim);font-size:.75rem;margin-top:12px}
.sc{display:none;flex-direction:column;align-items:center;justify-content:center;min-height:100dvh;padding:24px 20px;position:relative;z-index:1}.sc.on{display:flex;animation:fi .4s ease}
@keyframes fi{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
@keyframes pop{0%{transform:scale(0);opacity:0}70%{transform:scale(1.15)}100%{transform:scale(1);opacity:1}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
@keyframes shimmer{0%{background-position:-200% center}100%{background-position:200% center}}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
@keyframes bigP{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
@keyframes flipIn{0%{transform:rotateY(90deg) scale(.8);opacity:0}100%{transform:rotateY(0) scale(1);opacity:1}}
@keyframes burst{0%{transform:scale(.5);opacity:0}50%{transform:scale(1.2)}100%{transform:scale(1);opacity:1}}
@keyframes cfall{to{top:110vh;transform:rotate(720deg)}}
.title{font-family:'Dela Gothic One',sans-serif;font-size:clamp(2rem,8vw,3.5rem);background:linear-gradient(135deg,var(--accent),var(--accent2),var(--accent3));background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:shimmer 3s linear infinite;text-align:center;line-height:1.3;margin-bottom:8px}
.sub{color:var(--dim);font-size:.95rem;margin-bottom:32px;text-align:center}
.ssec{width:100%;max-width:400px;margin-bottom:24px}
.slab{font-weight:700;font-size:1rem;margin-bottom:10px;color:var(--accent2);display:flex;align-items:center;gap:8px}
.psel{display:flex;gap:10px;justify-content:center}
.pbtn{width:56px;height:56px;border-radius:16px;border:2px solid #ddd;background:var(--card2);color:var(--text);font-family:'Dela Gothic One',sans-serif;font-size:1.3rem;cursor:pointer;transition:.2s}.pbtn.sel{border-color:var(--accent);background:linear-gradient(135deg,rgba(232,69,122,.15),rgba(155,89,208,.15));box-shadow:0 0 16px rgba(232,69,122,.2);transform:scale(1.1)}.pbtn:active{transform:scale(.95)}
.ninp{display:flex;flex-direction:column;gap:8px}
.ni{background:var(--card2);border:2px solid #ddd;border-radius:12px;padding:12px 16px;color:var(--text);font-family:'Zen Maru Gothic',sans-serif;font-size:1rem;outline:none;caret-color:var(--accent)}.ni:focus{border-color:var(--accent2)}.ni::placeholder{color:#999;opacity:1}
.btn{padding:16px 40px;border:none;border-radius:50px;font-family:'Zen Maru Gothic',sans-serif;font-weight:900;font-size:1.15rem;cursor:pointer;transition:.2s}.btn:active{transform:scale(.96)}
.bp{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;box-shadow:0 4px 24px rgba(255,107,157,.4)}
.bs{background:var(--card2);color:var(--text);border:2px solid var(--accent2);padding:10px 24px;font-size:.95rem}
.bg{background:rgba(255,255,255,.08);color:var(--text);border:1.5px solid rgba(255,255,255,.2);padding:12px 28px;border-radius:50px;font-family:'Zen Maru Gothic',sans-serif;font-weight:700;font-size:1rem;cursor:pointer}.bg:active{transform:scale(.96)}
.tc{background:#fff5f7;border-radius:24px;padding:32px 28px;width:100%;max-width:400px;text-align:center;box-shadow:0 4px 20px rgba(0,0,0,.08);position:relative;overflow:hidden}
.tc::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--accent),var(--accent2),var(--accent3))}
.te{font-size:3.5rem;margin-bottom:12px;animation:bounce 2s ease infinite}
.tcat{font-size:.9rem;color:var(--dim);margin-bottom:6px}.ttxt{font-family:'Dela Gothic One',sans-serif;font-size:clamp(1.3rem,5vw,1.8rem);margin-bottom:8px;line-height:1.4}.tch{font-size:1rem;color:var(--accent3);margin-bottom:24px;font-weight:700}
.tbtns{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
.oti{font-family:'Dela Gothic One',sans-serif;font-size:1.4rem;margin-bottom:8px;text-align:center;color:var(--accent2)}
.osub{color:var(--dim);margin-bottom:20px;text-align:center;font-size:.9rem}
.otb{background:#fff5f7;border-radius:16px;padding:14px 20px;text-align:center;margin-bottom:24px;width:100%;max-width:380px;border:2px solid var(--accent2)}
.otl{font-family:'Dela Gothic One',sans-serif;font-size:1.2rem;color:var(--text)}
.ol{display:flex;flex-direction:column;gap:10px;width:100%;max-width:340px;margin-bottom:28px}
.oi{display:flex;align-items:center;gap:14px;background:#fff5f7;border-radius:14px;padding:14px 18px;font-weight:700;border-left:4px solid var(--accent);box-shadow:0 2px 8px rgba(0,0,0,.06)}
.onum{font-family:'Dela Gothic One',sans-serif;font-size:1.3rem;color:var(--accent);min-width:28px}
.oname{color:var(--text);font-size:1.15rem}.ocl{color:var(--dim);font-size:.85rem;margin-left:auto}
.obtns{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
.psi{text-align:center;width:100%;max-width:400px}
.pem{font-size:4rem;margin-bottom:16px}
.ppn{font-family:'Dela Gothic One',sans-serif;font-size:clamp(1.8rem,10vw,3.5rem);color:var(--accent);margin-bottom:4px}
.pla{font-size:1.1rem;color:var(--white);margin-bottom:20px;font-weight:700;opacity:.85}
.ptb{background:linear-gradient(135deg,rgba(255,107,157,.25),rgba(192,132,252,.2));border:2px solid var(--accent);border-radius:18px;padding:18px 22px;margin-bottom:28px}
.ptt{font-family:'Dela Gothic One',sans-serif;font-size:clamp(1.2rem,4.5vw,1.6rem);color:#fff;line-height:1.4;text-shadow:0 1px 4px rgba(0,0,0,.5)}
.pci{font-size:1.1rem;color:var(--gold);font-weight:900;margin-top:6px}
.ti{text-align:center;margin-bottom:16px}
.tp{font-family:'Dela Gothic One',sans-serif;font-size:1.8rem;color:var(--accent);margin-bottom:4px}
.tla{color:var(--dim);font-size:.95rem}
.pbar{display:flex;gap:8px;justify-content:center;margin-bottom:20px}
.pd{width:36px;height:36px;border-radius:12px;background:#e8e0f0;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:.9rem;color:#999;border:2px solid transparent;transition:.3s;opacity:.6}
.pd.dn{background:rgba(155,89,208,.15);border-color:var(--accent2);color:var(--accent2);opacity:1}
.pd.cu{width:48px;height:48px;border-color:var(--accent);background:rgba(232,69,122,.1);color:var(--accent);animation:pulse 1.5s ease infinite;opacity:1;font-size:1.2rem}
.pd-arrow{color:var(--accent);font-size:1.4rem;font-weight:900;text-align:center;margin-top:2px;animation:pulse 1.5s ease infinite}
.itb{background:#fff5f7;border:2px solid var(--accent);border-radius:16px;padding:14px 20px;margin-bottom:20px;text-align:center;width:100%;max-width:360px;box-shadow:0 2px 8px rgba(0,0,0,.06)}
.itt{font-family:'Dela Gothic One',sans-serif;font-size:clamp(1.1rem,4vw,1.4rem);color:var(--text)}
.cinp{width:180px;height:80px;border-radius:20px;border:3px solid var(--accent);background:#fff5f7;color:var(--text);font-family:'Dela Gothic One',sans-serif;font-size:2rem;text-align:center;text-align-last:center;outline:none;box-shadow:0 2px 12px rgba(0,0,0,.08);margin-bottom:8px;appearance:none;-webkit-appearance:none;cursor:pointer;padding:0 16px}
.cinp option{font-size:1.2rem;background:#fff5f7;color:var(--text)}
.ihint{color:var(--dim);font-size:.85rem;margin-bottom:20px;text-align:center}
.dem{font-size:5rem;margin-bottom:16px}.dtxt{font-family:'Dela Gothic One',sans-serif;font-size:1.6rem;color:var(--white);margin-bottom:8px;text-align:center}.dsub{color:var(--dim);margin-bottom:32px;text-align:center}
.rtxt{font-size:1.2rem;margin-bottom:12px;color:var(--dim)}
.rw{display:flex;gap:8px;justify-content:center;margin-bottom:12px;flex-wrap:wrap}
.rc{width:68px;height:80px;border-radius:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;font-family:'Dela Gothic One',sans-serif;font-size:2.2rem;position:relative;background:var(--card2);border:2px solid #bbb;color:#555}
.rc.rev{animation:flipIn .6s ease forwards}
.rc .ca{font-family:'Zen Maru Gothic',sans-serif;font-size:.6rem;font-weight:700;position:absolute;bottom:4px;color:#777}
.rc.ok{background:rgba(22,163,74,.1);border-color:var(--success);color:var(--success)}
.rc.ng{background:rgba(225,29,72,.1);border-color:var(--fail);color:var(--fail)}
.rcomb{font-family:'Dela Gothic One',sans-serif;font-size:clamp(2rem,10vw,3.5rem);margin-bottom:12px;min-height:60px}
.rv{font-size:1.5rem;font-weight:900;margin-bottom:20px;padding:12px 28px;border-radius:50px;opacity:0}
.rv.show{animation:burst .6s ease forwards}
.rvok{background:rgba(22,163,74,.1);color:var(--success);border:2px solid var(--success)}
.rvng{background:rgba(225,29,72,.1);color:var(--fail);border:2px solid var(--fail)}
.ra{background:#fff5f7;border-radius:16px;padding:16px 20px;width:100%;max-width:360px;margin-bottom:16px;box-shadow:0 2px 8px rgba(0,0,0,.06)}
.rat{font-weight:700;color:var(--accent2);margin-bottom:8px;font-size:.9rem}
.rar{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid rgba(0,0,0,.06);font-size:.95rem}.rar:last-child{border:none}
.sb{background:#fff5f7;border-radius:16px;padding:16px 20px;width:100%;max-width:360px;margin-bottom:20px;box-shadow:0 2px 8px rgba(0,0,0,.06)}
.sbt{font-weight:700;color:var(--gold);margin-bottom:8px;font-size:.9rem;text-align:center}
.sr{display:flex;justify-content:space-between;padding:4px 0;font-size:.95rem}
.sp{color:var(--gold);font-weight:700}
.rbtns{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
.cc{position:fixed;inset:0;pointer-events:none;z-index:100;overflow:hidden}
.cf{position:absolute;width:10px;height:10px;border-radius:2px;top:-20px;animation:cfall linear forwards}
.rstep{display:flex;gap:12px;margin-bottom:14px;align-items:flex-start}
.rnum{min-width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:.9rem;flex-shrink:0}
.rtx{flex:1;line-height:1.6}
@media(max-width:380px){.rc{width:52px;height:64px;font-size:1.6rem}.pd{width:34px;height:34px;font-size:.95rem}.cinp{width:100px;height:100px;font-size:2.5rem}}
</style>
</head>
<body>
<button class="gear" onclick="openSettings()">â˜°</button>
<div class="mo" id="mo" onclick="if(event.target===this)closeSettings()"><div class="md" onclick="event.stopPropagation()">
<button class="mclose" onclick="closeSettings()">âœ•</button>
<div class="mtabs"><button class="mtab on" onclick="stab('rules')">ğŸ“– ãƒ«ãƒ¼ãƒ«</button><button class="mtab" onclick="stab('history')">ğŸ“œ ã‚Šã‚Œã</button><button class="mtab" onclick="stab('fav')">â¤ï¸ ãŠæ°—ã«å…¥ã‚Š</button><button class="mtab" onclick="stab('credits')">ğŸ‘¤ ä½œã£ãŸäºº</button></div>
<div id="tc"></div>
</div></div>

<div id="s-setup" class="sc on">
<div class="title">ãƒ†ãƒ¬ãƒ‘ã‚·ãƒ¼<br>ãƒ¯ãƒ¼ãƒ‰</div><div class="sub">ã¿ã‚“ãªã®å¿ƒã¯ã²ã¨ã¤ã«ãªã‚Œã‚‹ã‹ï¼Ÿ</div>
<div class="ssec"><div class="slab">ğŸ® ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼äººæ•°</div><div class="psel" id="psel"></div></div>
<div class="ssec"><div class="slab">âœï¸ åå‰ã‚’å…¥åŠ›</div><div class="ninp" id="ninp"></div></div>
<button class="btn bp" onclick="startGame()">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>
</div>

<div id="s-topic" class="sc">
<div class="tc"><div class="te" id="te"></div><div class="tcat" id="tcat"></div><div class="ttxt" id="ttxt"></div><div class="tch" id="tch"></div>
<div class="tbtns"><button class="btn bp" onclick="showOrder()">ã“ã®ãŠé¡Œã§GOï¼</button><button class="btn bs" onclick="changeTopic()">ãƒã‚§ãƒ³ã‚¸ ğŸ”„</button></div></div>
</div>

<div id="s-order" class="sc">
<div class="oti">ğŸ² ä»Šå›ã®å…¥åŠ›é †ï¼</div>
<div class="ol" id="ol"></div>
<div style="font-size:1rem;font-weight:700;color:var(--text);text-align:center;margin-bottom:16px">ã“ã®é †ç•ªã§1æ–‡å­—ãšã¤å…¥åŠ›ã™ã‚‹ã‚ˆ</div>
<div style="display:flex;flex-direction:column;align-items:center;gap:14px">
<button class="btn bp" onclick="startInput()">ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>
<button onclick="reshuffle()" style="background:#e8e0f0;border:2px solid #7c5fbf;border-radius:50px;padding:8px 20px;color:#4a2d8a;font-family:'Zen Maru Gothic',sans-serif;font-weight:700;font-size:.8rem;cursor:pointer">ğŸ”€ ã‚‚ã†ä¸€åº¦ã‚·ãƒ£ãƒƒãƒ•ãƒ«</button>
</div>
</div>

<div id="s-pass" class="sc"><div class="psi">
<div class="pem">ğŸ“±</div><div class="ppn" id="ppn"></div><div class="pla" style="color:#333;font-weight:900">ã®ç•ªã ã‚ˆï¼ã‚¹ãƒãƒ›ã‚’å—ã‘å–ã£ã¦ã­</div>
<button class="btn bp" onclick="showInput()" style="margin-top:24px">å…¥åŠ›ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>
</div></div>

<div id="s-input" class="sc">
<div class="itb"><div class="itt" id="itp"></div></div>
<div class="tp" id="ip" style="font-size:clamp(2rem,8vw,3rem);margin-bottom:4px"></div>
<div id="il" style="color:#555;font-size:1rem;font-weight:700;margin-bottom:16px"></div>
<div class="pbar" id="pb"></div>
<select class="cinp" id="ci"><option value="">â–¼</option></select>
<div style="color:#777;font-size:.9rem;font-weight:700;margin-bottom:20px;text-align:center">â†‘ã‚¿ãƒƒãƒ—ã—ã¦æ–‡å­—ã‚’ãˆã‚‰ã‚“ã§ã­</div>
<button class="btn bp" onclick="submitChar()">æ±ºå®šï¼</button>
</div>

<div id="s-done" class="sc">
<div class="dem">âœ¨</div><div class="dtxt" style="color:var(--text)">å…¨å“¡ã®å…¥åŠ›ãŒçµ‚ã‚ã£ãŸã‚ˆï¼</div><div class="dsub" style="color:var(--dim)">ã¿ã‚“ãªã®å¿ƒã¯ã²ã¨ã¤ã«ãªã‚ŒãŸã‹ãªâ€¦ï¼Ÿ</div>
<button class="btn bp" style="animation:bigP 1.5s ease infinite" onclick="showResult()">ğŸ‰ ç™ºè¡¨ï¼</button>
</div>

<div id="s-result" class="sc">
<div class="rtxt">ã§ããŸè¨€è‘‰ã¯â€¦</div>
<div class="rw" id="rw"></div><div class="rcomb" id="rcomb"></div><div class="rv" id="rv"></div>
<div class="ra" id="ra" style="display:none"><div class="rat">ğŸ” ã¿ã‚“ãªã®å…¥åŠ›</div><div id="ar"></div></div>
<div class="sb" id="sb" style="display:none"><div class="sbt">ğŸ† ã‚¹ã‚³ã‚¢</div><div id="srows"></div></div>
<div class="rbtns" id="rbtns" style="display:none"><button class="btn bp" onclick="nextRound()">æ¬¡ã®ãŠé¡Œã¸ï¼</button><button class="btn bs" onclick="resetGame()">æœ€åˆã‹ã‚‰</button></div>
</div>

<div class="cc" id="cc"></div>
<script>
// â•â• SOUND â•â•
const AC=window.AudioContext||window.webkitAudioContext;let ac=null;
function ea(){if(!ac)ac=new AC();if(ac.state==='suspended')ac.resume();}
function pt(f,d,t='sine',v=.12){ea();const o=ac.createOscillator(),g=ac.createGain();o.type=t;o.frequency.setValueAtTime(f,ac.currentTime);g.gain.setValueAtTime(v,ac.currentTime);g.gain.exponentialRampToValueAtTime(.001,ac.currentTime+d);o.connect(g);g.connect(ac.destination);o.start();o.stop(ac.currentTime+d);}
function sfTap(){pt(800,.08,'sine',.1)}
function sfSel(){pt(600,.1,'triangle',.08);setTimeout(()=>pt(900,.1,'triangle',.07),60)}
function sfStart(){[523,659,784].forEach((f,i)=>setTimeout(()=>pt(f,.15,'triangle',.1),i*100))}
function sfPass(){pt(440,.15,'sine',.08)}
function sfSub(){pt(700,.12,'triangle',.1);setTimeout(()=>pt(880,.15,'triangle',.08),60)}
function sfDrum(){for(let i=0;i<10;i++)setTimeout(()=>pt(180+Math.random()*120,.07,'square',.03),i*70)}
function sfRev(i){pt([523,587,659,698,784][i%5],.3,'triangle',.14)}
function sfOk(){[523,659,784,1047].forEach((f,i)=>setTimeout(()=>pt(f,.3,'triangle',.14),i*150))}
function sfNg(){pt(300,.3,'sawtooth',.06);setTimeout(()=>pt(250,.4,'sawtooth',.05),200)}
function sfShuf(){[500,600,400,700].forEach((f,i)=>setTimeout(()=>pt(f,.06,'sine',.07),i*50))}

// â•â• NORMALIZE â•â•
const HW={};(function(){const h='ï½¦ï½§ï½¨ï½©ï½ªï½«ï½¬ï½­ï½®ï½¯ï½°ï½±ï½²ï½³ï½´ï½µï½¶ï½·ï½¸ï½¹ï½ºï½»ï½¼ï½½ï½¾ï½¿ï¾€ï¾ï¾‚ï¾ƒï¾„ï¾…ï¾†ï¾‡ï¾ˆï¾‰ï¾Šï¾‹ï¾Œï¾ï¾ï¾ï¾ï¾‘ï¾’ï¾“ï¾”ï¾•ï¾–ï¾—ï¾˜ï¾™ï¾šï¾›ï¾œï¾ï¾ï¾Ÿ',f='ãƒ²ã‚¡ã‚£ã‚¥ã‚§ã‚©ãƒ£ãƒ¥ãƒ§ãƒƒãƒ¼ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ³ã‚›ã‚œ';for(let i=0;i<h.length;i++)HW[h[i]]=f[i];})();
function hw2fw(s){let r='';for(let i=0;i<s.length;i++){const c=s[i],nx=s[i+1];if(HW[c]){let fc=HW[c];if(nx==='ï¾'||nx==='ã‚›'){const dk='ã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒãƒ’ãƒ•ãƒ˜ãƒ›',dr='ã‚¬ã‚®ã‚°ã‚²ã‚´ã‚¶ã‚¸ã‚ºã‚¼ã‚¾ãƒ€ãƒ‚ãƒ…ãƒ‡ãƒ‰ãƒãƒ“ãƒ–ãƒ™ãƒœ',x=dk.indexOf(fc);if(x>=0){fc=dr[x];i++;}}else if(nx==='ï¾Ÿ'||nx==='ã‚œ'){const hp='ãƒãƒ’ãƒ•ãƒ˜ãƒ›',hr='ãƒ‘ãƒ”ãƒ—ãƒšãƒ',x=hp.indexOf(fc);if(x>=0){fc=hr[x];i++;}}r+=fc;}else r+=c;}return r;}
function k2h(s){return s.replace(/[\u30A1-\u30F6]/g,m=>String.fromCharCode(m.charCodeAt(0)-0x60));}
function norm(s){return k2h(hw2fw(s)).replace(/ãƒ¼/g,'ãƒ¼').toLowerCase();}
function chkAns(chars,tp){const c=norm(chars.join('')).substring(0,tp.n);return tp.a.some(a=>norm(a).substring(0,tp.n)===c);}
function getCanon(chars,tp){const c=norm(chars.join('')).substring(0,tp.n);for(const a of tp.a)if(norm(a).substring(0,tp.n)===c)return norm(a).substring(0,tp.n);return chars.join('');}

// â•â• TOPICS â•â•
const TP=[
{c:"ãƒ•ãƒ«ãƒ¼ãƒ„",e:"ğŸ‘",t:"2æ–‡å­—ã®ãƒ•ãƒ«ãƒ¼ãƒ„ã¨ã„ãˆã°ï¼Ÿ",n:2,a:["ã‚‚ã‚‚","ã‹ã","ãªã—","ã†ã‚","ã‚†ãš","ã„ã¡ã˜ã","ãã†ã„","ã™ã‚‚ã‚‚","ã‚ã‚“ãš","ã–ãã‚","ãã¿","ã³ã‚"]},
{c:"ãƒ•ãƒ«ãƒ¼ãƒ„",e:"ğŸŒ",t:"3æ–‡å­—ã®ãƒ•ãƒ«ãƒ¼ãƒ„ã¨ã„ãˆã°ï¼Ÿ",n:3,a:["ã°ãªãª","ã‚Šã‚“ã”","ã¿ã‹ã‚“","ã¶ã©ã†","ã„ã¡ã”","ã‚Œã‚‚ã‚“","ã‚ã‚ã‚“","ã¾ã‚“ã”","ã•ãã‚‰","ã‚‰ã„ã¡","ã±ã±ã„ã‚„","ã©ã‚Šã‚ã‚“","ã‚ã‘ã³","ãã‚“ã‹ã‚“","ã§ã“ã½ã‚“","ãªã¤ã‚","ã–ã¼ã‚“","ã‚†ãšã‹"]},
{c:"ãƒ•ãƒ«ãƒ¼ãƒ„",e:"ğŸ‡",t:"4æ–‡å­—ã®ãƒ•ãƒ«ãƒ¼ãƒ„ã¨ã„ãˆã°ï¼Ÿ",n:4,a:["ã™ã„ã‹","ã•ãã‚‰ã‚“ã¼","ã±ã„ãªã£ã·ã‚‹","ãã†ã„ã„","ã¶ã‚‹ãƒ¼ã¹ã‚Šãƒ¼","ã™ã¨ã‚ã¹ã‚Šãƒ¼","ãã‚Œãƒ¼ã·","ãŠã‚Œã‚“ã˜","ã‚ã¼ã‹ã©","ã¾ã™ã‹ã£ã¨","ã‚‰ãšã¹ã‚Šãƒ¼","ã¾ã™ãã‚ã‚ã‚“","ã§ã“ã½ã‚“","ã‚‰ãµã‚‰ã‚“ã™","ã±ã£ã—ã‚‡ã‚“"]},
{c:"ã©ã†ã¶ã¤",e:"ğŸ±",t:"2æ–‡å­—ã®ã©ã†ã¶ã¤ã¨ã„ãˆã°ï¼Ÿ",n:2,a:["ã„ã¬","ã­ã“","ã†ã¾","ã•ã‚‹","ãã¾","ã†ã—","ã¶ãŸ","ã¨ã‚Š","ã—ã‹","ãŸã‹","ã‚ã—","ã¸ã³","ã‹ã°","ãã†","ã‚Šã™","ã‚€ã—","ãŸã¬ã","ã†ã•ã","ã²ã‚ˆã“"]},
{c:"ã©ã†ã¶ã¤",e:"ğŸ˜",t:"3æ–‡å­—ã®ã©ã†ã¶ã¤ã¨ã„ãˆã°ï¼Ÿ",n:3,a:["ã†ã•ã","ãã‚Šã‚“","ã±ã‚“ã ","ã”ã‚Šã‚‰","ã“ã‚ã‚‰","ãŸã¬ã","ãã¤ã­","ã„ã‚‹ã‹","ãã˜ã‚‰","ã‹ãˆã‚‹","ã‚ã²ã‚‹","ã­ãšã¿","ã²ã¤ã˜","ã‚‰ãã ","ã‹ã‚ã†ã","ã‚„ã","ã—ã¾ã†ã¾","ãŠã†ã‚€","ã„ã®ã—ã—","ã‚ã‚‰ã„ãã¾","ãºã‚Šã‹ã‚“","ã‹ã‚‰ã™","ã™ãšã‚","ã¤ã°ã‚","ã¯ã‚„ã¶ã•","ã‚ã«","ãŠãŠã‹ã¿","ã‚ã–ã‚‰ã—","ã²ã‚‡ã†","ã¤ã‚‹"]},
{c:"ã©ã†ã¶ã¤",e:"ğŸ¦",t:"4æ–‡å­—ã®ã©ã†ã¶ã¤ã¨ã„ãˆã°ï¼Ÿ",n:4,a:["ã‚‰ã„ãŠã‚“","ãºã‚“ãã‚“","ã‹ã‚“ãŒã‚‹ãƒ¼","ã¯ã‚€ã™ãŸãƒ¼","ã¡ãƒ¼ãŸãƒ¼","ã²ã‚‡ã†","ã—ã¾ã†ã¾","ãã‚‡ã†ã‚Šã‚…ã†","ã‹ã´ã°ã‚‰","ãµã‚‰ã¿ã‚“ã”","ãŠã‚‰ã‚“ã†ãƒ¼ãŸã‚“","ã¡ã‚“ã±ã‚“ã˜ãƒ¼","ã‚ã‚‹ã±ã‹","ã„ãã‚ãª","ã”ãƒ¼ã‚‹ã§ã‚“","ã‹ã‚ã†ã","ã‚ã‚Šãã„","ã‚„ã‚‚ã‚Š","ãŠã“ã˜ã‚‡","ã‚‚ã‚‹ã‚‚ã£ã¨"]},
{c:"ã©ã†ã¶ã¤",e:"ğŸŠ",t:"5æ–‡å­—ã®ã©ã†ã¶ã¤ã¨ã„ãˆã°ï¼Ÿ",n:5,a:["ã‹ã¶ã¨ã‚€ã—","ã‹ãŸã¤ã‚€ã‚Š","ã‹ã‚ã‚ŒãŠã‚“","ãã‚ãŒãŸã‚€ã—","ãŠãŠã‹ã¿","ã‹ã‚ã†ã","ã¡ã‚“ã±ã‚“ã˜ãƒ¼","ãŠã‚‰ã‚“ã†ãƒ¼ãŸã‚“","ã‚ã‚‹ã¾ã˜ã‚","ã•ã‚“ã—ã‚‡ã†ã†ãŠ","ãŠãŠã•ã‚“ã—ã‚‡ã†","ãŠã‹ã‚„ã©ã‹ã‚Š"]},
{c:"ãŸã¹ã‚‚ã®",e:"ğŸ™",t:"3æ–‡å­—ã®ãŸã¹ã‚‚ã®ã¨ã„ãˆã°ï¼Ÿ",n:3,a:["ã‹ã‚Œãƒ¼","ã•ã‚‰ã ","ãŸã¾ã”","ã·ã‚Šã‚“","ã†ã©ã‚“","ãŠã™ã—","ãã†ã‚ã‚“","ã±ã™ãŸ","ãªã£ã¨ã†","ã¨ã†ãµ","ã‚„ãã¨ã‚Š","ãŠã§ã‚“","ã¦ã‚“ã·ã‚‰","ã™ãƒ¼ã·","ã“ãƒ¼ã‚“","ã‘ãƒ¼ã","ãã£ããƒ¼","ãœã‚Šãƒ¼","ã‚ã„ã™","ã‚ã£ãµã‚‹","ã±ã‚“","ãã°","ãªã¹","ã‚‚ã¡","ã¿ã","ã“ã‚"]},
{c:"ãŸã¹ã‚‚ã®",e:"ğŸ•",t:"4æ–‡å­—ã®ãŸã¹ã‚‚ã®ã¨ã„ãˆã°ï¼Ÿ",n:4,a:["ã‹ã‚‰ã‚ã’","ã‚„ãã«ã","ãŸã“ã‚„ã","ãŠã‚€ã‚‰ã„ã™","ã¯ã‚“ã°ãƒ¼ã","ãã‚‡ã†ã–","ã‚‰ãƒ¼ã‚ã‚“","ã‚„ããã°","ãŠã«ãã‚Š","ã™ã±ã’ã¦ãƒ","ã‹ã¤ã©ã‚“","ã¦ã‚“ã©ã‚“","ãŠã‚„ã“ã©ã‚“","ã¡ã‚ƒãƒ¼ã¯ã‚“","ãã‚‰ãŸã‚“","ã©ãƒ¼ãªã¤","ã»ã£ã¨ã‘ãƒ¼ã","ã—ã¡ã‚…ãƒ¼","ã¿ãã—ã‚‹","ã‚„ãã†ã©ã‚“","ãˆã³ãµã‚‰ã„","ã“ã‚ã£ã‘","ã‚ã ã¾ã‚„ã","ã•ã‚“ã©ã„ã£ã¡","ã´ã–","ã‹ã¤ã‚Œã¤","ãŠã“ã®ã¿ã‚„ã","ã¡ãƒ¼ãšã‘ãƒ¼ã","ã™ã¦ãƒ¼ã"]},
{c:"ãŸã¹ã‚‚ã®",e:"ğŸ°",t:"5æ–‡å­—ã®ãŸã¹ã‚‚ã®ã¨ã„ãˆã°ï¼Ÿ",n:5,a:["ã¯ã‚“ã°ãƒ¼ãŒãƒ¼","ãŠã“ã®ã¿ã‚„ã","ã¡ã‚‡ã“ã‚Œãƒ¼ã¨","ãã‚Šãƒ¼ã‚€ã±ã‚“","ãµã‚Œã‚“ã¡ã¨ãƒ¼ã™ã¨","ãŠã‚€ã‚‰ã„ã™","ã—ã‚‡ã†ãŒã‚„ã","ã‚„ããã°ã±ã‚“","ãã‚ã‚ã£ã•ã‚“","ã‚ã‚ã‚“ã±ã‚“","ã‹ã‚‹ã¼ãªãƒ¼ã‚‰","ãªã½ã‚ŠãŸã‚“","ã‹ã¤ã•ã‚“ã©","ã¡ãã‚“ãªã’ã£ã¨","ãŸã¾ã”ã‚„ã","ã¡ãã‚","ã¿ãŸã‚‰ã—ã ã‚“ã”"]},
{c:"ã†ã¿ã®ã„ãã‚‚ã®",e:"ğŸ™",t:"2æ–‡å­—ã®ã†ã¿ã®ã„ãã‚‚ã®ã¯ï¼Ÿ",n:2,a:["ãŸã“","ã„ã‹","ã‹ã«","ãˆã³","ãµã","ãŸã„","ã‹ã‚","ã•ã‚","ã‚ã˜","ã•ã°","ã„ã‚ã—","ãã˜ã‚‰","ã†ã«","ã‹ã","ã‚ã•ã‚Š","ã—ã˜ã¿","ã¯ã¾ãã‚Š","ã²ã‚‰ã‚","ã‹ã‚Œã„","ã¶ã‚Š","ã“ã„","ã¾ã™","ã‚ã‚†"]},
{c:"ã†ã¿ã®ã„ãã‚‚ã®",e:"ğŸ¬",t:"3æ–‡å­—ã®ã†ã¿ã®ã„ãã‚‚ã®ã¯ï¼Ÿ",n:3,a:["ã„ã‚‹ã‹","ãã˜ã‚‰","ãã‚‰ã’","ã¾ãã‚","ã•ã‚“ã¾","ã‚‰ã£ã“","ã‹ã¤ãŠ","ã‚ã–ã‚‰ã—","ã²ã¨ã§","ãŸã¤ã®ãŠã¨ã—ã”","ãºã‚“ãã‚“","ã†ã¿ãŒã‚","ã—ã‚ƒã¡","ã‚ã ã‹","ãˆã„ã£","ãˆã„","ã‚ã‚“ã“ã†","ãŸã‚‰ã°","ã„ã›ãˆã³","ã†ãªã","ã¯ã¾ã¡","ã‚ã‚ã³","ã•ã–ãˆ"]},
{c:"ã„ã‚",e:"ğŸŒˆ",t:"2æ–‡å­—ã®è‰²ã¨ã„ãˆã°ï¼Ÿ",n:2,a:["ã‚ã‹","ã‚ãŠ","ã—ã‚","ãã‚","ã‚‚ã‚‚","ãã‚“","ãã‚“","ã¿ã©ã‚Š","ã‚€ã‚‰ã•ã","ã¯ã„ã„ã‚","ãŠã‚Œã‚“ã˜","ã¡ã‚ƒã„ã‚","ãã„ã‚","ã´ã‚“ã","ã‚ã„"]},
{c:"ã®ã‚Šã‚‚ã®",e:"ğŸš—",t:"3æ–‡å­—ã®ã®ã‚Šã‚‚ã®ã¨ã„ãˆã°ï¼Ÿ",n:3,a:["ãã‚‹ã¾","ãŸãã—ãƒ¼","ã°ã„ã","ã§ã‚“ã—ã‚ƒ","ã²ã“ã†ã","ã°ã™","ãµã­","ã‚ˆã£ã¨","ã˜ã©ã†ã—ã‚ƒ","ãã—ã‚ƒ","ã—ã‚“ã‹ã‚“ã›ã‚“","ã˜ã¦ã‚“ã—ã‚ƒ","ã‚ã‘ã£ã¨","ã¸ã‚Šã“ã·ãŸãƒ¼","ã™ããƒ¼ãŸãƒ¼","ãã‚Š","ã‹ã¬ãƒ¼","ã¼ãƒ¼ã¨"]},
{c:"ã®ã‚Šã‚‚ã®",e:"ğŸš‚",t:"4æ–‡å­—ã®ã®ã‚Šã‚‚ã®ã¨ã„ãˆã°ï¼Ÿ",n:4,a:["ã—ã‚“ã‹ã‚“ã›ã‚“","ã±ã¨ã‹ãƒ¼","ã²ã“ã†ã","ã˜ã¦ã‚“ã—ã‚ƒ","ã¸ã‚Šã“ã·ãŸãƒ¼","ãã‚…ã†ãã‚…ã†ã—ã‚ƒ","ã—ã‚‡ã†ã¼ã†ã—ã‚ƒ","ã‚ã‘ã£ã¨","ã‚‚ã®ã‚Œãƒ¼ã‚‹","ã™ããƒ¼ãŸãƒ¼","ã¨ã‚‰ã£ã","ã ã‚“ã·ã‹ãƒ¼","ã—ã‚‡ã†ã¼ã†"]},
{c:"ãŒã£ã",e:"ğŸ¹",t:"3æ–‡å­—ã®ãŒã£ãã¨ã„ãˆã°ï¼Ÿ",n:3,a:["ã´ã‚ã®","ããŸãƒ¼","ãŸã„ã“","ãµã‚‹ãƒ¼ã¨","ã°ã„ãŠã‚Šã‚“","ã¨ã‚‰ã‚“ãºã£ã¨","ã‚Šã“ãƒ¼ã ãƒ¼","ã¯ãƒ¼ã·","ã†ãã‚Œã‚Œ","ãŠã‚‹ãŒã‚“","ã©ã‚‰ã‚€","ã™ãš","ã‹ã™ãŸã­ã£ã¨","ã—ã‚“ã°ã‚‹","ã¡ã‡ã‚","ãŠãƒ¼ã¼ãˆ","ãã‚‰ã‚Šã­ã£ã¨","ã•ã£ãã™","ã“ã¨ã£","ã“ã¨"]},
{c:"ãŠã¯ãª",e:"ğŸŒ¸",t:"3æ–‡å­—ã®ãŠèŠ±ã¨ã„ãˆã°ï¼Ÿ",n:3,a:["ã•ãã‚‰","ã™ã¿ã‚Œ","ã°ã‚‰","ã‚†ã‚Š","ãã","ã†ã‚","ã‚‚ã‚‚","ã¤ã°ã","ã¼ãŸã‚“","ãµã˜","ã‚ã‚„ã‚","ã¯ã™","ã‚‰ã‚“","ã‹ãƒ¼ã­ãƒ¼ã—ã‚‡ã‚“","ã¡ã‚…ãƒ¼ã‚Šã£ã·","ã ã‚Šã‚","ã±ã‚“ã˜ãƒ¼","ãŒãƒ¼ã¹ã‚‰"]},
{c:"ãŠã¯ãª",e:"ğŸŒ»",t:"4æ–‡å­—ã®ãŠèŠ±ã¨ã„ãˆã°ï¼Ÿ",n:4,a:["ã²ã¾ã‚ã‚Š","ãŸã‚“ã½ã½","ã‚ã•ãŒãŠ","ã‚ã˜ã•ã„","ã“ã™ã‚‚ã™","ã¡ã‚…ãƒ¼ã‚Šã£ã·","ã‹ãƒ¼ã­ãƒ¼ã—ã‚‡ã‚“","ã‚‰ã¹ã‚“ã ãƒ¼","ã™ãšã‚‰ã‚“","ãã‚“ã‚‚ãã›ã„","ãªã®ã¯ãª","ã•ã–ã‚“ã‹","ã—ãã‚‰ã‚ã‚“","ã±ã‚“ã˜ãƒ¼","ãŒãƒ¼ã¹ã‚‰","ã¾ãƒ¼ãŒã‚Œã£ã¨","ã½ã„ã‚“ã›ã¡ã‚"]},
{c:"ã‚€ã—",e:"ğŸ¦‹",t:"3æ–‡å­—ã®ã‚€ã—ã¨ã„ãˆã°ï¼Ÿ",n:3,a:["ã°ã£ãŸ","ã»ãŸã‚‹","ã¨ã‚“ã¼","ã›ã¿","ã‚ã‚Š","ã¯ã¡","ã¡ã‚‡ã†ã¡ã‚‡","ã‹ã¾ãã‚Š","ãã‚ãŒãŸ","ã‹ã¶ã¨","ã¦ã‚“ã¨ã†","ã“ãŠã‚ã","ã™ãšã‚€ã—","ã ã‚“ã”ã‚€ã—","ã‹ãŸã¤ã‚€ã‚Š","ã¿ã®ã‚€ã—","ã‚ã¶","ã®ã¿","ã‹ã‚ã‚€ã—","ãã‚‚","ã’ã‚“ã”ã‚ã†","ã”ãã¶ã‚Š"]},
{c:"ã‚„ã•ã„",e:"ğŸ¥•",t:"3æ–‡å­—ã®ã‚„ã•ã„ã¨ã„ãˆã°ï¼Ÿ",n:3,a:["ã¨ã¾ã¨","ã‚ŒãŸã™","ãã‚ƒã¹ã¤","ã«ã‚“ã˜ã‚“","ã ã„ã“ã‚“","ã´ãƒ¼ã¾ã‚“","ã”ã¼ã†","ã­ã","ãªã™","ãŠãã‚‰","ã‹ã¼ã¡ã‚ƒ","ã—ã‚‡ã†ãŒ","ã«ã‚“ã«ã","ã‚‚ã‚„ã—","ã¿ã¤ã°","ã»ã†ã‚Œã‚“ãã†","ã±ã›ã‚Š","ã›ã‚ã‚Š","ã¡ã‚“ã’ã‚“ã•ã„","ã—ã„ãŸã‘","ã—ã‚ã˜","ãˆã®ã","ã¾ã„ãŸã‘","ãŸã‘ã®ã“"]},
{c:"ã‚„ã•ã„",e:"ğŸ¥¦",t:"4æ–‡å­—ã®ã‚„ã•ã„ã¨ã„ãˆã°ï¼Ÿ",n:4,a:["ãŸã¾ã­ã","ãã‚…ã†ã‚Š","ã´ãƒ¼ã¾ã‚“","ã«ã‚“ã˜ã‚“","ã˜ã‚ƒãŒã„ã‚‚","ã•ã¤ã¾ã„ã‚‚","ã¶ã‚ã£ã“ã‚Šãƒ¼","ã»ã†ã‚Œã‚“ãã†","ã¯ãã•ã„","ã‹ã¼ã¡ã‚ƒ","ãªã™","ã ã„ã“ã‚“","ã”ã¼ã†","ã‚Œã‚“ã“ã‚“","ã¨ã†ã‚‚ã‚ã“ã—","ã‚ã™ã±ã‚‰ãŒã™","ã¿ãšãª","ã“ã¾ã¤ãª","ã¡ã‚“ã’ã‚“ã•ã„","ã—ã„ãŸã‘","ãˆã ã¾ã‚","ãã‚‰ã¾ã‚","ã‚‰ã§ãƒã£ã—ã‚…"]},
{c:"ã‚¹ãƒãƒ¼ãƒ„",e:"âš½",t:"3æ–‡å­—ã®ã‚¹ãƒãƒ¼ãƒ„ã¨ã„ãˆã°ï¼Ÿ",n:3,a:["ã•ã£ã‹ãƒ¼","ã¦ã«ã™","ã°ã™ã‘","ã™ã„ãˆã„","ã‚„ãã‚…ã†","ã”ã‚‹ãµ","ã‚‰ãã³ãƒ¼","ã™ããƒ¼","ã™ã‘ãƒ¼ã¨","ã˜ã‚…ã†ã©ã†","ã‘ã‚“ã©ã†","ã‹ã‚‰ã¦","ã™ã‚‚ã†","ã¼ãã—ã‚“ã","ã°ã‚Œãƒ¼","ã¯ã‚“ã©ã¼ãƒ¼ã‚‹","ã»ã£ã‘ãƒ¼","ã¼ãƒ¼ã‚Šã‚“ã","ã‚ãƒ¼ã¡ã‡ã‚Šãƒ¼","ã ã‚“ã™"]},
{c:"ã‚¹ãƒãƒ¼ãƒ„",e:"ğŸ€",t:"4æ–‡å­—ã®ã‚¹ãƒãƒ¼ãƒ„ã¨ã„ãˆã°ï¼Ÿ",n:4,a:["ã‚„ãã‚…ã†","ã™ã„ãˆã„","ãŸã£ãã‚…ã†","ã˜ã‚…ã†ã©ã†","ã‹ã‚‰ã¦","ã‘ã‚“ã©ã†","ã°ã‚Œãƒ¼ã¼ãƒ¼ã‚‹","ã¯ã‚“ã©ã¼ãƒ¼ã‚‹","ã°ã©ã¿ã‚“ã¨ã‚“","ã™ã‘ãƒ¼ã¨","ã™ã®ãƒ¼ã¼ãƒ¼ã©","ã¾ã‚‰ãã‚“","ã¨ã‚‰ã„ã‚ã™ã‚ã‚“","ãµã‡ã‚“ã—ã‚“ã","ã‚ãƒ¼ã¡ã‡ã‚Šãƒ¼","ãã‚Šã‘ã£ã¨"]},
];

// â•â• STORAGE â•â•
const HK='tpw_h',FK='tpw_f',MH=200,MF=50;
function ldH(){try{return JSON.parse(localStorage.getItem(HK))||[];}catch{return[];}}
function svH(h){if(h.length>MH)h=h.slice(0,MH);localStorage.setItem(HK,JSON.stringify(h));}
function ldF(){try{return JSON.parse(localStorage.getItem(FK))||[];}catch{return[];}}
function svF(f){localStorage.setItem(FK,JSON.stringify(f));}
function addHist(e){const h=ldH();h.unshift(e);svH(h);}
function isF(id){return ldF().some(x=>x.id===id);}
function togF(id){const h=ldH(),f=ldF(),it=h.find(x=>x.id===id);if(!it)return;const fi=f.findIndex(x=>x.id===id);if(fi>=0){f.splice(fi,1);svF(f);}else{if(f.length>=MF){alert('ãŠæ°—ã«å…¥ã‚Šã¯'+MF+'ä»¶ã¾ã§ã ã‚ˆï¼\nå¤ã„ãŠæ°—ã«å…¥ã‚Šã‚’å¤–ã—ã¦ã­ã€‚');return;}f.push(it);svF(f);}const at=document.querySelector('.mtab.on');if(at){if(at.textContent.includes('å±¥æ­´'))stab('history');else if(at.textContent.includes('ãŠæ°—ã«å…¥ã‚Š'))stab('fav');}}

// â•â• GAME STATE â•â•
let pc=3,pls=[],scs=[],ctp=null,cord=[],cturn=0,inps=[],used=[],rnd=0;

function shuf(a){const r=[...a];for(let i=r.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[r[i],r[j]]=[r[j],r[i]];}return r;}
function showSc(id){document.querySelectorAll('.sc').forEach(s=>s.classList.remove('on'));const s=document.getElementById(id);s.classList.add('on');s.style.animation='none';s.offsetHeight;s.style.animation='';}

// â•â• INIT â•â•
function init(){
  const sel=document.getElementById('psel');
  for(let i=2;i<=5;i++){const b=document.createElement('button');b.className='pbtn'+(i===3?' sel':'');b.textContent=i;b.onclick=()=>{sfSel();pc=i;document.querySelectorAll('.pbtn').forEach((x,j)=>x.classList.toggle('sel',j+2===i));updN();};sel.appendChild(b);}
  updN();
}
function updN(){
  const c=document.getElementById('ninp'),old=Array.from(c.querySelectorAll('.ni')).map(e=>e.value);c.innerHTML='';
  for(let i=0;i<pc;i++){const inp=document.createElement('input');inp.className='ni';inp.placeholder='ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼'+(i+1)+'ã®åå‰';inp.value=old[i]||'';inp.maxLength=8;c.appendChild(inp);}
}
function startGame(){
  ea();sfStart();const els=document.querySelectorAll('.ni');pls=[];
  for(let i=0;i<pc;i++)pls.push(els[i].value.trim()||'P'+(i+1));
  scs=new Array(pc).fill(0);rnd=0;used=[];nextRound();
}
function nextRound(){rnd++;pickTopic();}
function pickTopic(){
  const minN=pc>=3?3:2;
  const av=TP.map((t,i)=>({...t,idx:i})).filter(t=>t.n>=minN&&t.n<=pc&&!used.includes(t.idx));
  if(!av.length){used=[];return pickTopic();}
  const p=av[Math.floor(Math.random()*av.length)];ctp=p;used.push(p.idx);
  document.getElementById('te').textContent=p.e;
  document.getElementById('tcat').textContent='ã‚«ãƒ†ã‚´ãƒªï¼š'+p.c;
  document.getElementById('ttxt').textContent=p.t;
  document.getElementById('tch').textContent=p.n+'æ–‡å­— ï¼ '+p.n+'äººãŒå…¥åŠ›';
  showSc('s-topic');sfTap();
}
function changeTopic(){sfShuf();pickTopic();}

// â•â• ORDER â•â•
function showOrder(){
  sfTap();cord=shuf(Array.from({length:pc},(_,i)=>i)).slice(0,ctp.n);
  renOrd();showSc('s-order');
}
function renOrd(){
  const colors=['#ffe0e6','#dde8ff','#d8f5e0','#fff3d0','#ecddf5'];
  const borders=['#e8457a','#4a7ae8','#1a9a4a','#d97706','#9b59d0'];
  const l=document.getElementById('ol');l.innerHTML='';
  cord.forEach((pi,i)=>{const d=document.createElement('div');d.className='oi';d.style.background=colors[pi%5];d.style.borderLeftColor=borders[pi%5];d.innerHTML='<span class="onum" style="color:'+borders[pi%5]+'">'+(i+1)+'</span><span class="oname">'+pls[pi]+'</span><span class="ocl">'+(i+1)+'æ–‡å­—ç›®</span>';l.appendChild(d);});
}
function reshuffle(){sfShuf();cord=shuf(Array.from({length:pc},(_,i)=>i)).slice(0,ctp.n);renOrd();}

// â•â• INPUT FLOW â•â•
function startInput(){sfStart();cturn=0;inps=[];showPass();}
function showPass(){
  sfPass();const p=pls[cord[cturn]];
  document.getElementById('ppn').textContent=p;
  showSc('s-pass');
}
function showInput(){
  sfTap();const p=pls[cord[cturn]];
  document.getElementById('ip').textContent=p;
  document.getElementById('il').textContent=(cturn+1)+'æ–‡å­—ç›®ã‚’ãˆã‚‰ã‚“ã§ã­';
  document.getElementById('itp').textContent=ctp.t;
  const bar=document.getElementById('pb');bar.innerHTML='';
  for(let i=0;i<ctp.n;i++){
    const wrap=document.createElement('div');wrap.style.cssText='display:flex;flex-direction:column;align-items:center;';
    const d=document.createElement('div');d.className='pd';
    if(i<cturn){d.classList.add('dn');d.textContent='âœ“';}
    else if(i===cturn){d.classList.add('cu');d.textContent=i+1;}
    else d.textContent=i+1;
    wrap.appendChild(d);
    if(i===cturn){const ar=document.createElement('div');ar.className='pd-arrow';ar.textContent='â†‘';wrap.appendChild(ar);}
    bar.appendChild(wrap);
  }
  const ci=document.getElementById('ci');
  ci.innerHTML='<option value="">â–¼ ãˆã‚‰ã¶</option>';
  const chars='ã‚ã„ã†ãˆãŠã‹ãŒããããã‘ã’ã“ã”ã•ã–ã—ã˜ã™ãšã›ãœãããŸã ã¡ã¢ã¤ã¥ã£ã§ã¦ã©ã¨ãªã«ã¬ã­ã®ã¯ã°ã±ã²ã³ã´ãµã¶ã·ã¸ã¹ãºã»ã¼ã½ã¾ã¿ã‚€ã‚ã‚‚ã‚„ã‚ƒã‚†ã‚…ã‚ˆã‚‡ã‚‰ã‚Šã‚‹ã‚Œã‚ã‚ã‚’ã‚“ãƒ¼';
  for(const c of chars){const o=document.createElement('option');o.value=c;o.textContent=c;ci.appendChild(o);}
  ci.value='';showSc('s-input');
}
function submitChar(){
  const ci=document.getElementById('ci');let v=ci.value;
  if(!v){ci.style.borderColor='var(--fail)';setTimeout(()=>ci.style.borderColor='var(--accent)',500);return;}
  sfSub();inps.push({p:pls[cord[cturn]],pi:cord[cturn],ch:v});cturn++;
  if(cturn>=ctp.n){sfDrum();showSc('s-done');}else showPass();
}
// select mode - no Enter listener needed

// â•â• RESULT â•â•
function showResult(){
  sfTap();const raw=inps.map(i=>i.ch),ok=chkAns(raw,ctp);
  let disp=ok?getCanon(raw,ctp).split(''):raw;
  const wEl=document.getElementById('rw');wEl.innerHTML='';
  document.getElementById('ra').style.display='none';
  document.getElementById('sb').style.display='none';
  document.getElementById('rbtns').style.display='none';
  disp.forEach((ch,i)=>{const el=document.createElement('div');el.className='rc';el.id='rc'+i;el.innerHTML='<span class="cl" style="visibility:hidden">'+ch+'</span><span class="ca">'+inps[i].p+'</span>';wEl.appendChild(el);});
  const cEl=document.getElementById('rcomb');cEl.textContent='';cEl.style.opacity='0';
  const vEl=document.getElementById('rv');vEl.className='rv';vEl.style.opacity='0';
  showSc('s-result');
  disp.forEach((ch,i)=>{setTimeout(()=>{sfRev(i);const el=document.getElementById('rc'+i);el.classList.add('rev');el.querySelector('.cl').style.visibility='visible';},i*1000+500);});
  const t0=disp.length*1000+1200;
  setTimeout(()=>{cEl.textContent='ã€Œ'+disp.join('')+'ã€';cEl.style.opacity='1';cEl.style.color=ok?'var(--success)':'var(--fail)';document.querySelectorAll('.rc').forEach(el=>el.classList.add(ok?'ok':'ng'));},t0);
  setTimeout(()=>{
    if(ok){vEl.textContent='ğŸ‰ ãƒ†ãƒ¬ãƒ‘ã‚·ãƒ¼æˆåŠŸï¼ï¼';vEl.className='rv rvok show';inps.forEach(inp=>{scs[inp.pi]+=1;});confetti();sfOk();}
    else{vEl.textContent='ğŸ˜‚ ãƒãƒ©ãƒãƒ©ã€œï¼';vEl.className='rv rvng show';sfNg();}
    const ar=document.getElementById('ar');ar.innerHTML='';
    inps.forEach(inp=>{const r=document.createElement('div');r.className='rar';r.innerHTML='<span>'+inp.p+'</span><span style="font-weight:700">'+inp.ch+'</span>';ar.appendChild(r);});
    document.getElementById('ra').style.display='block';
    const sr=document.getElementById('srows');sr.innerHTML='';
    pls.forEach((p,i)=>{const r=document.createElement('div');r.className='sr';r.innerHTML='<span>'+p+'</span><span class="sp">'+scs[i]+'pt</span>';sr.appendChild(r);});
    document.getElementById('sb').style.display='block';
    document.getElementById('rbtns').style.display='flex';
    addHist({id:Date.now().toString(36)+Math.random().toString(36).slice(2,6),date:new Date().toISOString(),members:[...pls],topic:ctp.t,word:disp.join(''),success:ok});
  },t0+600);
}
function resetGame(){sfTap();showSc('s-setup');}
function confetti(){
  const c=document.getElementById('cc');c.innerHTML='';
  const cols=['#ff6b9d','#c084fc','#67e8f9','#4ade80','#fbbf24','#fb7185','#a78bfa'];
  for(let i=0;i<80;i++){const d=document.createElement('div');d.className='cf';d.style.left=Math.random()*100+'%';d.style.background=cols[Math.floor(Math.random()*cols.length)];d.style.width=(Math.random()*10+6)+'px';d.style.height=(Math.random()*10+6)+'px';d.style.animationDuration=(Math.random()*2+2)+'s';d.style.animationDelay=Math.random()*1+'s';d.style.borderRadius=Math.random()>.5?'50%':'2px';c.appendChild(d);}
  setTimeout(()=>c.innerHTML='',5000);
}

// â•â• SETTINGS MODAL â•â•
function openSettings(){sfTap();document.getElementById('mo').classList.add('open');stab('rules');}
function closeSettings(){document.getElementById('mo').classList.remove('open');}
function stab(tab){
  document.querySelectorAll('.mtab').forEach(t=>t.classList.remove('on'));
  const tabs=document.querySelectorAll('.mtab'),map={rules:0,history:1,fav:2,credits:3};
  if(tabs[map[tab]])tabs[map[tab]].classList.add('on');
  const tc=document.getElementById('tc');
  if(tab==='rules'){
    tc.innerHTML='<div class="mtitle">ğŸ“– ã‚ãã³ã‹ãŸ</div><div class="rstep"><div class="rnum">1</div><div class="rtx">ã„ã£ã—ã‚‡ã«ã‚ãã¶äººã®æ•°ï¼ˆ2ã€œ5äººï¼‰ã‚’ãˆã‚‰ã‚“ã§ã€ãªã¾ãˆã‚’å…¥ã‚Œã‚ˆã†ï¼</div></div><div class="rstep"><div class="rnum">2</div><div class="rtx">ãŠé¡ŒãŒå‡ºã‚‹ã‚ˆï¼ãŸã¨ãˆã°ã€Œ3æ–‡å­—ã®ãƒ•ãƒ«ãƒ¼ãƒ„ã¨ã„ãˆã°ï¼Ÿã€ã¿ãŸã„ãªã‚‚ã®ã€‚ã¿ã‚“ãªã§è¦‹ã¦ã­ã€‚</div></div><div class="rstep"><div class="rnum">3</div><div class="rtx">å…¥åŠ›ã™ã‚‹é †ç•ªãŒãƒ©ãƒ³ãƒ€ãƒ ã«ãã¾ã‚‹ã‚ˆã€‚</div></div><div class="rstep"><div class="rnum">4</div><div class="rtx">ã˜ã‚…ã‚“ã°ã‚“ã«ã€è‡ªåˆ†ãŒæ€ã„ã†ã‹ã¹ãŸè¨€è‘‰ã®ã€Œâ—‹æ–‡å­—ç›®ã€ã‚’1æ–‡å­—ã ã‘å…¥åŠ›ã™ã‚‹ã‚ˆã€‚<br><b>å‰ã®äººãŒä½•ã‚’å…¥ã‚ŒãŸã‹ã¯è¦‹ãˆãªã„ã‚ˆï¼</b></div></div><div class="rstep"><div class="rnum">5</div><div class="rtx">å…¨å“¡ãŒå…¥åŠ›ã—ãŸã‚‰ã€ã§ããŸè¨€è‘‰ã‚’ç™ºè¡¨ï¼ã¡ã‚ƒã‚“ã¨ã—ãŸè¨€è‘‰ã«ãªã£ã¦ãŸã‚‰<b>ãƒ†ãƒ¬ãƒ‘ã‚·ãƒ¼æˆåŠŸğŸ‰</b></div></div><div style="margin-top:16px;padding:12px 16px;background:rgba(232,69,122,.08);border-radius:12px;font-size:.9rem;line-height:1.6">ğŸ’¡ <b>ã‚³ãƒ„</b>ï¼šãŠé¡Œã‚’è¦‹ã¦ã€ã¿ã‚“ãªãŒæ€ã„ã¤ããã†ãªè¨€è‘‰ã‚’ã‹ã‚“ãŒãˆã‚ˆã†ï¼å¿ƒã‚’ã²ã¨ã¤ã«ã™ã‚‹ã‚²ãƒ¼ãƒ ã ã‚ˆã€‚</div>';
  }else if(tab==='history'){
    const h=ldH();let s='<div class="mtitle">ğŸ“œ ã‚Šã‚Œã</div><div style="font-size:.8rem;color:var(--dim);margin-bottom:12px">ğŸ’¡ â™¡ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ãŠæ°—ã«å…¥ã‚Šã«ç™»éŒ²ã§ãã‚‹ã‚ˆï¼</div>';
    if(!h.length)s+='<div class="hempty">ã¾ã ã‚Šã‚ŒããŒãªã„ã‚ˆï¼<br>ã‚ãã‚“ã§ã¿ã‚ˆã†ğŸ®</div>';
    else{h.forEach(it=>{const d=new Date(it.date),ds=d.getFullYear()+'/'+(''+(d.getMonth()+1)).padStart(2,'0')+'/'+(''+d.getDate()).padStart(2,'0')+' '+(''+d.getHours()).padStart(2,'0')+':'+(''+d.getMinutes()).padStart(2,'0');const fav=isF(it.id);s+='<div class="hi"><button class="hheart" onclick="togF(\''+it.id+'\')" style="font-size:1.5rem;'+(fav?'':'text-shadow:0 0 2px #e8457a;')+'">'+(fav?'â¤ï¸':'â™¡')+'</button><div class="hdate">'+ds+'</div><div class="hmem">ğŸ‘¥ '+it.members.join('ãƒ»')+'</div><div class="htopic">'+it.topic+'</div><div class="hword '+(it.success?'ok':'ng')+'">'+(it.success?'â­•':'âŒ')+' '+it.word+'</div></div>';});s+='<div class="hnote">â€» ã•ã„ã ã„'+MH+'ä»¶ã¾ã§ä¿å­˜ã•ã‚Œã¾ã™</div>';}
    tc.innerHTML=s;
  }else if(tab==='fav'){
    const f=ldF();let s='<div class="mtitle">â¤ï¸ ãŠæ°—ã«å…¥ã‚Š</div>';
    if(!f.length)s+='<div class="hempty">ãŠæ°—ã«å…¥ã‚Šã¯ã¾ã ãªã„ã‚ˆï¼<br>ã‚Šã‚Œãã® â™¡ ã‚’æŠ¼ã—ã¦ã¿ã¦ã­</div>';
    else{f.forEach(it=>{const d=new Date(it.date),ds=d.getFullYear()+'/'+(''+(d.getMonth()+1)).padStart(2,'0')+'/'+(''+d.getDate()).padStart(2,'0')+' '+(''+d.getHours()).padStart(2,'0')+':'+(''+d.getMinutes()).padStart(2,'0');s+='<div class="hi"><button class="hheart" onclick="togF(\''+it.id+'\')" style="font-size:1.5rem">â¤ï¸</button><div class="hdate">'+ds+'</div><div class="hmem">ğŸ‘¥ '+it.members.join('ãƒ»')+'</div><div class="htopic">'+it.topic+'</div><div class="hword '+(it.success?'ok':'ng')+'">'+(it.success?'â­•':'âŒ')+' '+it.word+'</div></div>';});s+='<div class="hnote">â€» ã•ã„ã ã„'+MF+'ä»¶ã¾ã§æ°¸ä¹…ä¿å­˜ã•ã‚Œã¾ã™</div>';}
    tc.innerHTML=s;
  }else if(tab==='credits'){
    tc.innerHTML='<div class="mtitle">ğŸ‘¤ ä½œã£ãŸäºº</div><div style="text-align:center;padding:60px 0"><div style="font-size:3rem;margin-bottom:12px">ğŸ®</div><div style="font-family:\'Dela Gothic One\',sans-serif;font-size:1.4rem;color:var(--accent);margin-bottom:8px">ãƒ‘ãƒ‘ãƒ”ãƒ”ãƒãƒã‚²ãƒ¼ãƒ ã‚º</div><div style="color:var(--dim);font-size:.9rem">ãƒ†ãƒ¬ãƒ‘ã‚·ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’éŠã‚“ã§ãã‚Œã¦<br>ã‚ã‚ŠãŒã¨ã†ï¼</div></div>';
  }
}

init();
</script>
</body>
</html>
